{"id":"bdclaim-06q","title":"Implement claim auditability","description":"Every claim visible in DB (status/assignee changes). Optionally log as structured events. Log fields: timestamp, issueId, agent, old_status, new_status, old_assignee, new_assignee, filters. Ref: TSD 14 Security","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:39.792594-06:00","updated_at":"2025-12-01T01:07:39.792594-06:00"}
{"id":"bdclaim-0op","title":"Implement SQLite read/write to Beads DB","description":"bd-claim reads/writes issues directly to Beads SQLite DB. Share DB with bd CLI and daemon. No direct Git access. Ref: TSD 05 System Context","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:22.652542-06:00","updated_at":"2025-12-01T01:03:22.652542-06:00"}
{"id":"bdclaim-0r5","title":"Implement labels table JOIN","description":"Query labels table (issue_id, label) for label filtering. JOIN for include_labels, anti-join for exclude_labels. Ref: TSD 11 Persistence","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:06:32.449734-06:00","updated_at":"2025-12-01T01:06:32.449734-06:00"}
{"id":"bdclaim-0x1","title":"Implement atomic UPDATE...WHERE...RETURNING pattern","description":"Use single-statement UPDATE with subquery SELECT to atomically claim. Check rows affected. Zero rows = NoIssueAvailable. Combines read+write in one roundtrip. Ref: TSD 09 CQRS","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:05:10.340159-06:00","updated_at":"2025-12-01T01:05:10.340159-06:00"}
{"id":"bdclaim-10f","title":"Define ClaimIssueResult DTO","description":"Create DTO: ClaimIssueResult{status:ok|error, agent:AgentName, issue:Issue|null, filters:ClaimFilters, error?:ClaimError}. Ref: TSD 10 API Design","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:05.327065-06:00","updated_at":"2025-12-01T01:06:05.327065-06:00"}
{"id":"bdclaim-15j","title":"Implement Shared Database Integration pattern","description":"Strictly confine raw SQL to infrastructure adapters. Use explicit local shared DB pattern (single machine, one SQLite file). Ref: TSD 03 Context Map","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:02:37.714032-06:00","updated_at":"2025-12-01T01:02:37.714032-06:00"}
{"id":"bdclaim-1bj","title":"Implement UC-4: Filtered claim by labels/priority","description":"Agent calls bd-claim --agent name --label X --priority Y. Only ready issues matching filters are considered. Returns filtered issue or null. Ref: TSD 02 UC-4","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:02:19.097098-06:00","updated_at":"2025-12-01T01:02:19.097098-06:00"}
{"id":"bdclaim-27o","title":"Implement Issue claim invariants","description":"Enforce claim invariants: status==open, not blocked, assignee matches filter. Transition: status-\u003ein_progress, assignee-\u003eagent. Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:26.450911-06:00","updated_at":"2025-12-01T01:04:26.450911-06:00"}
{"id":"bdclaim-28y","title":"Implement --min-priority filter flag","description":"Implement --min-priority \u003clevel\u003e flag. Accept low/medium/high or numeric. Filter by minimum priority. Ref: TSD 10 API Design","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:05:33.538459-06:00","updated_at":"2025-12-01T01:05:33.538459-06:00"}
{"id":"bdclaim-2w5","title":"Implement issue_claim_no_issue log event","description":"Log event issue_claim_no_issue with fields: agent, filters, duration_ms. Ref: TSD 15 Observability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:56.318937-06:00","updated_at":"2025-12-01T01:07:56.318937-06:00"}
{"id":"bdclaim-35b","title":"Implement claim filtering by assignee","description":"Filter eligible issues for claim by assignee field (e.g., unassigned only via --only-unassigned flag). Ref: TSD 02 BC-2","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:01:44.885622-06:00","updated_at":"2025-12-01T01:01:44.885622-06:00"}
{"id":"bdclaim-38y","title":"Implement claim filtering by priority","description":"Filter eligible issues for claim by minimum priority level (--min-priority flag). Ref: TSD 02 BC-2","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:01:47.40256-06:00","updated_at":"2025-12-01T01:01:47.40256-06:00"}
{"id":"bdclaim-3h9","title":"Define IssueRepositoryPort interface","description":"Abstract issue storage port interface with claimOneReadyIssue method. Implemented by SQLiteIssueRepositoryAdapter. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:46.20073-06:00","updated_at":"2025-12-01T01:03:46.20073-06:00"}
{"id":"bdclaim-3q9","title":"Implement efficient SQL with proper indexing","description":"Ensure indexes on (status, priority, created_at). Use LIMIT 1 with sensible ORDER BY to avoid full scans. Log warning if indexes not guaranteed. Ref: TSD 13 Scalability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:19.189017-06:00","updated_at":"2025-12-01T01:07:19.189017-06:00"}
{"id":"bdclaim-3rn","title":"Write CLI tests for flags and output","description":"CLI tests ensuring command-line flags and JSON output formatting work as expected. Test all flag combinations. Ref: SDD Section 17 Testing","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:08:43.378599-06:00","updated_at":"2025-12-01T01:08:43.378599-06:00"}
{"id":"bdclaim-3xr","title":"Implement --timeout-ms flag","description":"Implement --timeout-ms \u003cN\u003e flag to override DB busy timeout. Default via config. Ref: TSD 10 API Design","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:05:59.136461-06:00","updated_at":"2025-12-01T01:05:59.136461-06:00"}
{"id":"bdclaim-45k","title":"Implement human-runnable CLI for debugging","description":"Ensure humans can run bd-claim to debug swarm behavior. Support --human output mode and --dry-run for inspection. Ref: TSD 02 BC-6","status":"in_progress","priority":2,"issue_type":"task","assignee":"test-agent","created_at":"2025-12-01T01:02:02.610433-06:00","updated_at":"2025-12-01T01:19:57.24951-06:00"}
{"id":"bdclaim-476","title":"Implement --db override flag","description":"Implement --db \u003cpath\u003e flag to override auto-discovered SQLite DB path. Matches bd CLI flag pattern. Ref: TSD 10 API Design","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:05:36.156565-06:00","updated_at":"2025-12-01T01:05:36.156565-06:00"}
{"id":"bdclaim-4a2","title":"Implement --only-unassigned filter flag","description":"Implement --only-unassigned flag. Only consider issues where assignee IS NULL. Ref: TSD 10 API Design","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:05:34.351574-06:00","updated_at":"2025-12-01T01:05:34.351574-06:00"}
{"id":"bdclaim-4go","title":"Implement NoIssueAvailable domain event","description":"Create NoIssueAvailable event with payload: agent, filters, checkedAt. Used for logging idle behavior and utilization metrics. Ref: TSD 08 Domain Events","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:50.158237-06:00","updated_at":"2025-12-01T01:04:50.158237-06:00"}
{"id":"bdclaim-4hb","title":"Implement SQLiteUnitOfWork","description":"Infrastructure component for transaction handling. BEGIN/COMMIT/ROLLBACK with busy timeout handling. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:00.58818-06:00","updated_at":"2025-12-01T01:04:00.58818-06:00"}
{"id":"bdclaim-4ok","title":"Implement Anti-Corruption Layer for Beads DB","description":"Create domain models (Issue, IssueStatus, LabelSet) that wrap raw DB rows. No direct schema leakage to application/agent layers. Confine raw SQL to infrastructure adapters. Ref: TSD 03 Context Map","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:02:36.816083-06:00","updated_at":"2025-12-01T01:02:36.816083-06:00"}
{"id":"bdclaim-4t2","title":"Implement claim filtering by labels","description":"Filter eligible issues for claim by labels (--label and --exclude-label flags). Support multiple label filters. Ref: TSD 02 BC-2","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:01:46.293038-06:00","updated_at":"2025-12-01T01:01:46.293038-06:00"}
{"id":"bdclaim-53u","title":"Implement issue_claim_error log event","description":"Log event issue_claim_error with fields: agent?, error.code, error.message, duration_ms. Ref: TSD 15 Observability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:57.10217-06:00","updated_at":"2025-12-01T01:07:57.10217-06:00"}
{"id":"bdclaim-5a3","title":"Implement JSON-first CLI output interface","description":"Implement stable JSON output format with status (ok/error), agent field, issue object or null, and error details. Use --json flag (default). Ref: TSD 02 BC-4","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:02:01.016815-06:00","updated_at":"2025-12-01T01:02:01.016815-06:00"}
{"id":"bdclaim-5ax","title":"Implement JSON success output schema","description":"Output JSON schema: {status:ok, agent:string, issue:{id, status, assignee, priority, labels, title, content_hash, external_ref, source_repo, compaction_level, compacted_at, original_size, created_at, updated_at}, filters:{...}}. Ref: TSD 10 API","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:00.941247-06:00","updated_at":"2025-12-01T01:06:00.941247-06:00"}
{"id":"bdclaim-5pn","title":"Implement issue_claim_success log event","description":"Log event issue_claim_success with fields: issueId, agent, filters, duration_ms. Ref: TSD 15 Observability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:55.517245-06:00","updated_at":"2025-12-01T01:07:55.517245-06:00"}
{"id":"bdclaim-5wl","title":"Implement JSON no-issue output schema","description":"Output JSON schema: {status:ok, agent:string, issue:null, filters:{...}}. Distinguishes from error. Ref: TSD 10 API Design","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:02.114456-06:00","updated_at":"2025-12-01T01:06:02.114456-06:00"}
{"id":"bdclaim-61s","title":"Implement AgentName value object","description":"Create AgentName value object: non-empty string, max 64 chars, sanitized for logging (no control chars). Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:29.078877-06:00","updated_at":"2025-12-01T01:04:29.078877-06:00"}
{"id":"bdclaim-687","title":"Implement short-lived connections","description":"Each invocation opens connection, performs single transaction, and closes. Minimize long-lived lock holders. Ref: TSD 13 Scalability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:20.239479-06:00","updated_at":"2025-12-01T01:07:20.239479-06:00"}
{"id":"bdclaim-6ml","title":"Implement ClaimIssueService domain service","description":"Domain service with core claiming logic and invariants. Loads and updates Issue via IssueRepositoryPort. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:44.368296-06:00","updated_at":"2025-12-01T01:03:44.368296-06:00"}
{"id":"bdclaim-6ni","title":"Respect Beads daemon locking behavior","description":"Ensure bd-claim respects Beads daemon locking. Coexist with bd CLI and daemon over same DB without disruption. No code-level coupling. Ref: TSD 03 Context Map","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:02:39.329007-06:00","updated_at":"2025-12-01T01:02:39.329007-06:00"}
{"id":"bdclaim-6rw","title":"Define LoggerPort interface","description":"Structured logging port interface. Implemented by LoggingAdapter for stderr/system logger. Ref: TSD 06 Component Diagram","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:03:48.187574-06:00","updated_at":"2025-12-01T01:03:48.187574-06:00"}
{"id":"bdclaim-71o","title":"Implement ClaimFailed domain event","description":"Create ClaimFailed event with payload: agent?, errorCode (ClaimErrorCode), errorMessage, occurredAt. Used for error logging and metrics (claims_error_total). Ref: TSD 08 Domain Events","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:51.00465-06:00","updated_at":"2025-12-01T01:04:51.00465-06:00"}
{"id":"bdclaim-72z","title":"Implement atomic issue claiming capability","description":"Select exactly one ready issue according to Beads semantics and transition it to claimed state (status=in_progress, assignee=agent) atomically. Guarantee no two successful claims return same issue. Ref: TSD 02 BC-1","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:01:43.948113-06:00","updated_at":"2025-12-01T01:01:43.948113-06:00"}
{"id":"bdclaim-7d0","title":"Implement Priority value object","description":"Create Priority value object: enumerated or numeric. Used for ordering and filtering. Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:30.793106-06:00","updated_at":"2025-12-01T01:04:30.793106-06:00"}
{"id":"bdclaim-7mh","title":"Implement --pretty flag for JSON formatting","description":"Implement --pretty flag for pretty-printed JSON output with indentation. Ref: TSD 10 API Design","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:05:57.418597-06:00","updated_at":"2025-12-01T01:05:57.418597-06:00"}
{"id":"bdclaim-7xg","title":"Implement issues table operations","description":"Operate on issues table: id(TEXT PK), status, priority(INT), assignee, content_hash, external_ref, source_repo, compaction_level(INT), compacted_at, original_size(INT). Ref: TSD 11 Persistence","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:30.347834-06:00","updated_at":"2025-12-01T01:06:30.347834-06:00"}
{"id":"bdclaim-7zl","title":"Implement Beads-native atomic claim operation","description":"Implement the core atomic claim operation that allows multiple agents to safely claim ready issues in parallel without double-claiming. Must use SQLite transactions. Ref: TSD 01_bounded_context.md","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:01:27.239449-06:00","updated_at":"2025-12-01T01:01:27.239449-06:00"}
{"id":"bdclaim-83v","title":"Implement lightweight CQRS command flow","description":"Implement ClaimIssueCommand(agent, filters) via ClaimIssueUseCase -\u003e ClaimIssueService -\u003e IssueRepositoryPort. Query operates directly against Beads SQLite. Ref: TSD 09 CQRS","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:05:08.198342-06:00","updated_at":"2025-12-01T01:05:08.198342-06:00"}
{"id":"bdclaim-84c","title":"Implement --human output mode","description":"Implement --human flag for human-friendly single/multi-line output. Alternative to JSON. Ref: TSD 10 API Design","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:05:58.28311-06:00","updated_at":"2025-12-01T01:05:58.28311-06:00"}
{"id":"bdclaim-8cx","title":"Create Infrastructure Layer adapters","description":"Create internal/infrastructure/ with: SQLiteIssueRepositoryAdapter, SQLiteUnitOfWork, WorkspaceDiscoveryAdapter, LoggingAdapter, MetricsAdapter, ConfigAdapter. Ref: TSD 04 Architecture","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:03.018516-06:00","updated_at":"2025-12-01T01:03:03.018516-06:00"}
{"id":"bdclaim-8lq","title":"Create Domain Layer package structure","description":"Create internal/domain/ with: Issue aggregate, value objects (IssueId, AgentName, IssueStatus, LabelSet, Priority, ClaimFilters, ReadySpecification), domain services (ClaimIssueService, ReadyIssueSelector), domain events. Pure business logic. Ref: TSD 04 Architecture","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:00.660349-06:00","updated_at":"2025-12-01T01:03:00.660349-06:00"}
{"id":"bdclaim-8nb","title":"Implement Shared DB ACL pattern","description":"SQLiteIssueRepositoryAdapter encapsulates raw SQL, maps DB records to domain Issue, builds predicates via ReadySpecification and ClaimFilters. No external code sees raw schemas. Ref: TSD 12 Integration","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:52.015318-06:00","updated_at":"2025-12-01T01:30:00.189838-06:00","closed_at":"2025-12-01T01:30:00.189842-06:00"}
{"id":"bdclaim-908","title":"Implement CLIAdapter component","description":"Parse flags, format JSON output, set exit codes. Interface layer component that calls ClaimIssueUseCase. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:42.264862-06:00","updated_at":"2025-12-01T01:03:42.264862-06:00"}
{"id":"bdclaim-9b1","title":"Implement IssueStatus enum value object","description":"Create IssueStatus enum: open, in_progress, closed, blocked, archived. Map from Beads status column. Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:29.884058-06:00","updated_at":"2025-12-01T01:04:29.884058-06:00"}
{"id":"bdclaim-9jq","title":"Implement --json output flag (default)","description":"Implement --json flag as default output format. Recommended for agents. Ref: TSD 10 API Design","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:05:56.085043-06:00","updated_at":"2025-12-01T01:05:56.085043-06:00"}
{"id":"bdclaim-a0j","title":"Implement schema validation","description":"Use PRAGMA table_info(issues) to discover columns. Ignore new columns. Emit SCHEMA_INCOMPATIBLE if status or assignee columns missing/renamed. No migrations run by bd-claim. Ref: TSD 11 Persistence","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:06:35.083483-06:00","updated_at":"2025-12-01T01:06:35.083483-06:00"}
{"id":"bdclaim-bab","title":"Implement candidate selection rules","description":"Apply ready predicate (status==open, not blocked), then filters (assignee, labels, priority). Order by priority DESC, created_at ASC, id ASC. Use LIMIT 1. Ref: TSD 09 CQRS","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:05:09.251232-06:00","updated_at":"2025-12-01T01:05:09.251232-06:00"}
{"id":"bdclaim-bcr","title":"Implement busy timeout and retry policy","description":"Set busy_timeout 1000-3000ms per connection. On SQLITE_BUSY: exponential backoff with jitter (20ms, 40ms, 80ms) up to 3-5 attempts. Emit ClaimFailed on persistent contention. Ref: TSD 11 Persistence","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:34.299274-06:00","updated_at":"2025-12-01T01:30:13.689848-06:00","closed_at":"2025-12-01T01:30:13.68986-06:00"}
{"id":"bdclaim-bgx","title":"Implement optimistic+pessimistic concurrency","description":"Use SQL UPDATE...WHERE predicate LIMIT 1 inside transaction for atomicity. SQLite locking ensures only one updater. Implement retry/backoff for busy DB. Ref: TSD 04 Architecture","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:08.704296-06:00","updated_at":"2025-12-01T01:03:08.704296-06:00"}
{"id":"bdclaim-cun","title":"Define ClaimIssueRequest DTO","description":"Create DTO: ClaimIssueRequest{agent:AgentName, filters:ClaimFilters, dryRun:bool, timeoutMs?:number}. Ref: TSD 10 API Design","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:04.406239-06:00","updated_at":"2025-12-01T01:06:04.406239-06:00"}
{"id":"bdclaim-czs","title":"Support 5-10 concurrent agents scalability","description":"Target: 5-10 concurrent agents per workspace, up to thousands of issues. Validate under concurrent load. Ref: TSD 13 Scalability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:17.807882-06:00","updated_at":"2025-12-01T01:07:17.807882-06:00"}
{"id":"bdclaim-d1b","title":"Implement transaction-per-request pattern","description":"1 claim attempt = 1 DB transaction. Aligns naturally with CLI lifetime. Ref: TSD 04 Architecture","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:03:07.818702-06:00","updated_at":"2025-12-01T01:03:07.818702-06:00"}
{"id":"bdclaim-d5s","title":"Implement ReadySpecification value object","description":"Create ReadySpecification encapsulating ready logic: status==open, not blocked. Provide sql_predicate_fragment() and isSatisfiedBy(issue) methods. Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:33.775133-06:00","updated_at":"2025-12-01T01:04:33.775133-06:00"}
{"id":"bdclaim-dme","title":"Define WorkspaceDiscoveryPort interface","description":"Port interface for finding .beads DB path. Methods: findWorkspaceRoot, findBeadsDbPath. Implemented by WorkspaceDiscoveryAdapter. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:47.294823-06:00","updated_at":"2025-12-01T01:03:47.294823-06:00"}
{"id":"bdclaim-dsv","title":"Implement ClaimIssueUseCase component","description":"Application layer component that coordinates claim flow. Calls ClaimIssueService domain service. Uses ports for DB, workspace, logging, metrics. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:43.52838-06:00","updated_at":"2025-12-01T01:03:43.52838-06:00"}
{"id":"bdclaim-dzd","title":"Implement JSON logging to stderr","description":"JSON logs to stderr by default (unless --quiet). Support log levels: ERROR, WARN, INFO, DEBUG. Ref: TSD 15 Observability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:54.547375-06:00","updated_at":"2025-12-01T01:07:54.547375-06:00"}
{"id":"bdclaim-e07","title":"Implement ReadySpecification compatible with bd ready","description":"Mirror/complement bd ready predicate: only open issues, no blockers (via blocked_issues_cache), not already in-progress. Abstract behind specification pattern. Ref: TSD 02 BC-3","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:01:59.760337-06:00","updated_at":"2025-12-01T01:01:59.760337-06:00"}
{"id":"bdclaim-e7e","title":"Enforce single responsibility per invocation","description":"Each bd-claim process handles exactly one claim attempt then exits. No daemonization. Keep failure modes simple and predictable. Ref: TSD 04 Architecture","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:03:06.710312-06:00","updated_at":"2025-12-01T01:03:06.710312-06:00"}
{"id":"bdclaim-e9l","title":"Write integration tests for SQLite","description":"Integration tests verifying bd-claim + SQLite interaction. Use temp/in-memory SQLite with Beads schema. Verify query correctness and transaction behavior. Ref: SDD Section 17 Testing","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T01:08:42.568209-06:00","updated_at":"2025-12-01T01:29:52.015374-06:00","closed_at":"2025-12-01T01:29:52.015377-06:00"}
{"id":"bdclaim-ejr","title":"Ensure no-daemon runtime behavior","description":"Run as normal process, no daemon mode. Each invocation short-lived (single claim). Requires access to git working tree, .beads directory, SQLite DB. Ref: TSD 16 Deployment","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:08:23.7089-06:00","updated_at":"2025-12-01T01:08:23.7089-06:00"}
{"id":"bdclaim-erx","title":"Implement defensive validation","description":"Validate agent name early. Validate filters. Defensive programming throughout. Ref: TSD 13 Reliability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:25.478389-06:00","updated_at":"2025-12-01T01:07:25.478389-06:00"}
{"id":"bdclaim-f5l","title":"Implement MetricsAdapter (optional)","description":"Optional infrastructure adapter for metrics sink. Support counters and histograms. Ref: TSD 06 Component Diagram","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-01T01:04:03.597414-06:00","updated_at":"2025-12-01T01:12:18.187566-06:00","closed_at":"2025-12-01T01:12:18.187566-06:00","close_reason":"Removed - no metrics/telemetry collection"}
{"id":"bdclaim-fat","title":"Implement LoggingAdapter","description":"Infrastructure adapter mapping logs to stderr/system logger. Support JSON format and log levels. Ref: TSD 06 Component Diagram","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:04:02.598876-06:00","updated_at":"2025-12-01T01:04:02.598876-06:00"}
{"id":"bdclaim-g3k","title":"Implement JSON error output schema","description":"Output JSON schema: {status:error, agent:string, issue:null, error:{code:ErrorCode, message:string}}. Error codes: DB_NOT_FOUND, SCHEMA_INCOMPATIBLE, SQLITE_BUSY, WORKSPACE_NOT_FOUND, INVALID_ARGUMENT, UNEXPECTED. Ref: TSD 10 API","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:03.635168-06:00","updated_at":"2025-12-01T01:06:03.635168-06:00"}
{"id":"bdclaim-gcz","title":"Implement --exclude-label filter flag","description":"Implement --exclude-label \u003clabel\u003e flag, repeatable. Exclude issues containing any of these labels. Ref: TSD 10 API Design","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:05:32.385283-06:00","updated_at":"2025-12-01T01:05:32.385283-06:00"}
{"id":"bdclaim-gzq","title":"Create Scoop bucket manifest","description":"Create Scoop bucket manifest pointing to GitHub Releases for Windows distribution. Ref: TSD 16 Deployment","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:08:21.854313-06:00","updated_at":"2025-12-01T01:12:51.007167-06:00"}
{"id":"bdclaim-hf5","title":"Define MetricsPort interface","description":"Optional metrics/events port interface. Implemented by MetricsAdapter. Ref: TSD 06 Component Diagram","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-01T01:03:49.172816-06:00","updated_at":"2025-12-01T01:12:24.878411-06:00","closed_at":"2025-12-01T01:12:24.878411-06:00","close_reason":"Removed - no metrics/telemetry collection"}
{"id":"bdclaim-ig6","title":"Cross-compile for macOS, Linux, Windows","description":"Cross-compile for macOS (amd64, arm64), Linux (amd64, arm64), Windows (amd64, arm64). Support via make build-all. Ref: TSD 16 Deployment","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:08:18.909159-06:00","updated_at":"2025-12-01T01:08:18.909159-06:00"}
{"id":"bdclaim-ij1","title":"Create Interface Layer CLI frontend","description":"Create cmd/ CLI frontend: flag parsing, JSON serialization, exit code mapping. Thin wrapper around Application layer. Ref: TSD 04 Architecture","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:04.98907-06:00","updated_at":"2025-12-01T01:03:04.98907-06:00"}
{"id":"bdclaim-ikj","title":"Ensure claim is local to single .beads workspace","description":"Ensure bd-claim operates on a single .beads workspace and SQLite DB. Auto-discover workspace from cwd. Ref: TSD 01_bounded_context.md","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:01:28.092091-06:00","updated_at":"2025-12-01T01:01:28.092091-06:00"}
{"id":"bdclaim-j2o","title":"Package as standalone binary","description":"Package bd-claim as standalone binary, statically linked where possible. Support via make build. Ref: TSD 16 Deployment","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T01:08:17.963865-06:00","updated_at":"2025-12-01T01:29:52.046529-06:00","closed_at":"2025-12-01T01:29:52.046536-06:00"}
{"id":"bdclaim-j6n","title":"Implement UC-3: No work available response","description":"When no ready issues match filters or all are claimed, return {status:ok, agent:name, issue:null}. Clearly distinguish from error. Ref: TSD 02 UC-3","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:02:17.99808-06:00","updated_at":"2025-12-01T01:02:17.99808-06:00"}
{"id":"bdclaim-jm6","title":"Implement --log-level flag","description":"Implement --log-level \u003clevel\u003e flag to control verbosity (ERROR, WARN, INFO, DEBUG). Ref: TSD 10 API Design","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:06:00.072677-06:00","updated_at":"2025-12-01T01:06:00.072677-06:00"}
{"id":"bdclaim-juv","title":"Implement workspace_discovery log event","description":"Log event workspace_discovery with fields: cwd, workspace_root, db_path. Ref: TSD 15 Observability","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:07:58.403339-06:00","updated_at":"2025-12-01T01:07:58.403339-06:00"}
{"id":"bdclaim-k3f","title":"Implement IssueId value object","description":"Create IssueId value object wrapping string/UUID. Opaque with equality operations only. Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:27.701689-06:00","updated_at":"2025-12-01T01:04:27.701689-06:00"}
{"id":"bdclaim-k88","title":"Implement IssueClaimed domain event","description":"Create IssueClaimed event with payload: issueId, agent, claimedAt. Used for structured logging and metrics (claims_success_total). Ref: TSD 08 Domain Events","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:49.105855-06:00","updated_at":"2025-12-01T01:04:49.105855-06:00"}
{"id":"bdclaim-kkk","title":"Support Agent/Orchestrator CLI invocation","description":"Ensure bd-claim can be invoked by agents and human overseers via CLI. Support both programmatic and manual usage patterns. Ref: TSD 05 System Context","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:03:21.675797-06:00","updated_at":"2025-12-01T01:03:21.675797-06:00"}
{"id":"bdclaim-l90","title":"Implement Issue aggregate root","description":"Create Issue aggregate with identity IssueId and fields: id, status, assignee, priority, labels, blocked, source_repo, content_hash, created_at, updated_at, compaction_level. Include claim() method. Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:25.660983-06:00","updated_at":"2025-12-01T01:04:25.660983-06:00"}
{"id":"bdclaim-lo9","title":"Implement Open Host Service CLI pattern","description":"bd-claim as stateless claim-one-issue endpoint. Orchestrators can implement higher-level policies (round-robin, quotas, fairness) on top. Ref: TSD 12 Integration","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:06:54.51119-06:00","updated_at":"2025-12-01T01:06:54.51119-06:00"}
{"id":"bdclaim-lrb","title":"Implement ClaimFilters value object","description":"Create immutable ClaimFilters: only_unassigned, include_labels, exclude_labels, min_priority. Used by selector to build predicates. Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:32.699924-06:00","updated_at":"2025-12-01T01:04:32.699924-06:00"}
{"id":"bdclaim-ly7","title":"Implement clear failure mode handling","description":"Handle failure modes: DB_NOT_FOUND, WORKSPACE_NOT_FOUND, SQLITE_BUSY (after retries), UNEXPECTED. Distinguish NoIssueAvailable from ClaimFailed. Ref: TSD 13 Reliability","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T01:07:24.234605-06:00","updated_at":"2025-12-01T01:30:00.15752-06:00","closed_at":"2025-12-01T01:30:00.157526-06:00"}
{"id":"bdclaim-m0g","title":"Implement UC-5: --dry-run for inspection","description":"Implement --dry-run flag that shows which issue would be claimed without committing DB mutations. Safe introspection of selection logic. Ref: TSD 02 UC-5","status":"closed","priority":2,"issue_type":"task","assignee":"claude-agent","created_at":"2025-12-01T01:02:20.069411-06:00","updated_at":"2025-12-01T01:29:51.950526-06:00","closed_at":"2025-12-01T01:29:51.950537-06:00"}
{"id":"bdclaim-m60","title":"Create Application Layer with use case handlers","description":"Create internal/application/ with: ClaimIssueUseCase handler, DTOs (ClaimIssueRequest, ClaimIssueResult), port interfaces (IssueRepositoryPort, WorkspaceDiscoveryPort, ClockPort, LoggerPort, MetricsPort). Ref: TSD 04 Architecture","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:02.01829-06:00","updated_at":"2025-12-01T01:03:02.01829-06:00"}
{"id":"bdclaim-m8j","title":"Implement blocked_issues_cache query","description":"Query blocked_issues_cache table (issue_id PK) for ready predicate. Critical for performance. NOT EXISTS check in claim SQL. Ref: TSD 11 Persistence","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:31.553763-06:00","updated_at":"2025-12-01T01:06:31.553763-06:00"}
{"id":"bdclaim-mbb","title":"Implement concurrency-safe SQLite transactions","description":"Use SQLite transactions and locking that: does not corrupt Beads DB, minimizes lock contention with bd/daemon operations, avoids deadlocks. Use BEGIN IMMEDIATE. Ref: TSD 02 BC-5","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:02:01.737575-06:00","updated_at":"2025-12-01T01:02:01.737575-06:00"}
{"id":"bdclaim-mcc","title":"Implement exponential backoff on contention","description":"Exponential backoff with jitter to avoid thundering herds when many agents start simultaneously. Ref: TSD 13 Scalability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:21.170662-06:00","updated_at":"2025-12-01T01:07:21.170662-06:00"}
{"id":"bdclaim-mni","title":"Achieve 100% test coverage","description":"Enforce 100% code coverage policy per NFR-5. All logic including error handling and edge cases must be covered. Build fails if coverage drops below 100%. Ref: SDD Section 17 Testing","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:08:39.437586-06:00","updated_at":"2025-12-01T01:08:39.437586-06:00"}
{"id":"bdclaim-mop","title":"Implement environment validation tests","description":"Before running tests, verify local bd CLI available via bd --version, bd --help, bd quickstart. Ensure runtime environment matches expectations. Ref: SDD Section 17 Testing","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:08:40.467708-06:00","updated_at":"2025-12-01T01:08:40.467708-06:00"}
{"id":"bdclaim-n24","title":"Implement idempotent claim success","description":"Claim success means DB already reflects claimed state. Agent crash after response keeps issue in_progress (consistent with Beads semantics). Ref: TSD 13 Reliability","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:23.116644-06:00","updated_at":"2025-12-01T01:07:23.116644-06:00"}
{"id":"bdclaim-nez","title":"Implement WorkspaceDiscoveryAdapter constraints","description":"Only connect to valid .beads DB instances. Avoid cross-repo confusion. Auto-discover from cwd. Ref: TSD 12 Integration","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:06:56.094946-06:00","updated_at":"2025-12-01T01:06:56.094946-06:00"}
{"id":"bdclaim-ot2","title":"Implement BEGIN IMMEDIATE transaction","description":"Use BEGIN IMMEDIATE to acquire reserved lock early, preventing lock upgrade issues. Single transaction per claim. Ref: TSD 11 Persistence","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:33.435633-06:00","updated_at":"2025-12-01T01:30:13.723597-06:00","closed_at":"2025-12-01T01:30:13.723608-06:00"}
{"id":"bdclaim-pwd","title":"Implement UC-2: Multiple agents racing for work","description":"Multiple concurrent bd-claim calls must serialize via SQLite locking. Losing contenders see zero updated rows and return issue:null or get different issue. No duplicate claims. Ref: TSD 02 UC-2","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:02:17.181612-06:00","updated_at":"2025-12-01T01:02:17.181612-06:00"}
{"id":"bdclaim-q5j","title":"Implement WorkspaceDiscoveryAdapter","description":"Infrastructure adapter discovering Beads workspace. Find .beads directory and DB path from cwd. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:01.350503-06:00","updated_at":"2025-12-01T01:04:01.350503-06:00"}
{"id":"bdclaim-qjq","title":"Implement UC-1: Single agent claims work","description":"Agent runs bd-claim --agent backend-1 --json, system picks ready issue, sets status=in_progress and assignee, returns JSON with issue. Agent gets exclusive ownership. Ref: TSD 02 UC-1","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:02:15.912554-06:00","updated_at":"2025-12-01T01:02:15.912554-06:00"}
{"id":"bdclaim-r3j","title":"Achieve \u003c100ms claim latency","description":"Target typical claim latency \u003c50-100ms on dev machine. Optimize with prepared statements and selective column loading. Ref: TSD 13 Performance","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:07:22.240044-06:00","updated_at":"2025-12-01T01:07:22.240044-06:00"}
{"id":"bdclaim-r5t","title":"Write unit tests for domain logic","description":"Unit tests for ClaimIssueService, ReadySpecification, pure functions. Mock external dependencies (DB, filesystem) for speed and isolation. Ref: SDD Section 17 Testing","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T01:08:41.308126-06:00","updated_at":"2025-12-01T01:29:51.983357-06:00","closed_at":"2025-12-01T01:29:51.983364-06:00"}
{"id":"bdclaim-rhm","title":"Write concurrency tests for race conditions","description":"Concurrency tests with multiple concurrent bd-claim calls. Verify no duplicate claims, proper serialization. Ref: docs/test/concurrency_tests.md","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:08:44.302287-06:00","updated_at":"2025-12-01T01:08:44.302287-06:00"}
{"id":"bdclaim-t26","title":"Implement SQLite storage using Beads DB","description":"Use existing Beads SQLite DB at .beads/beads.db. Respect WAL mode as configured by Beads. Share with bd CLI and daemon. Ref: TSD 11 Persistence","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:28.404982-06:00","updated_at":"2025-12-01T01:06:28.404982-06:00"}
{"id":"bdclaim-t4b","title":"Implement Issue Aggregate component","description":"Domain model representing issue and state transitions. Claim transition validates invariants. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:45.126005-06:00","updated_at":"2025-12-01T01:03:45.126005-06:00"}
{"id":"bdclaim-tpd","title":"Implement --workspace override flag","description":"Implement --workspace \u003cpath\u003e flag to override auto-discovered workspace root. Optional. Ref: TSD 10 API Design","status":"in_progress","priority":2,"issue_type":"task","assignee":"test-agent","created_at":"2025-12-01T01:05:35.260546-06:00","updated_at":"2025-12-01T01:32:57.716687-06:00"}
{"id":"bdclaim-tw0","title":"Implement local trust model","description":"Design for local use on trusted developer machine or CI. No network-facing endpoints. Attack surface: malicious arguments and unexpected DB content. Ref: TSD 14 Security","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:07:38.801278-06:00","updated_at":"2025-12-01T01:07:38.801278-06:00"}
{"id":"bdclaim-unr","title":"Implement --agent flag (required)","description":"Implement required --agent \u003cname\u003e flag. Sets assignee on claimed issue. Validates AgentName constraints. Ref: TSD 10 API Design","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:05:29.163124-06:00","updated_at":"2025-12-01T01:05:29.163124-06:00"}
{"id":"bdclaim-upp","title":"Ensure consistency with bd ready semantics","description":"ReadySpecification must mirror bd ready semantics exactly. Re-use same SQL view/function if exposed, or mirror logic closely. Ref: TSD 12 Integration","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-01T01:06:53.52626-06:00","updated_at":"2025-12-01T01:30:00.222704-06:00","closed_at":"2025-12-01T01:30:00.222712-06:00"}
{"id":"bdclaim-vie","title":"Create Homebrew tap formula","description":"Create Homebrew tap formula pointing to GitHub Releases for macOS and Linux distribution. Ref: TSD 16 Deployment","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:08:20.953444-06:00","updated_at":"2025-12-01T01:12:50.97405-06:00"}
{"id":"bdclaim-w9o","title":"Define Issue Claiming bounded context package structure","description":"Create Go package structure for bd-claim bounded context: internal/domain/, internal/application/, internal/infrastructure/, cmd/. Ref: TSD 01_bounded_context.md","status":"closed","priority":0,"issue_type":"task","assignee":"claude-agent","created_at":"2025-12-01T01:01:19.438842-06:00","updated_at":"2025-12-01T01:20:03.969929-06:00","closed_at":"2025-12-01T01:20:03.969934-06:00"}
{"id":"bdclaim-whs","title":"Implement --label filter flag (repeatable)","description":"Implement --label \u003clabel\u003e flag, repeatable for multiple labels. Only consider issues containing ALL specified labels. Ref: TSD 10 API Design","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T01:05:31.081561-06:00","updated_at":"2025-12-01T01:05:31.081561-06:00"}
{"id":"bdclaim-wtw","title":"Implement --dry-run flag","description":"Implement --dry-run flag showing which issue would be claimed without updating DB. Returns candidate issue without mutation. Ref: TSD 10 API Design","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:05:36.950282-06:00","updated_at":"2025-12-01T01:05:36.950282-06:00"}
{"id":"bdclaim-xoq","title":"Implement Open Host Service via CLI","description":"CLI command bd-claim acts as stable service interface for agents/orchestrators. Define stable JSON contract. Ref: TSD 03 Context Map","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:02:38.55844-06:00","updated_at":"2025-12-01T01:02:38.55844-06:00"}
{"id":"bdclaim-ynf","title":"Implement version compatibility check","description":"On startup, optionally check Beads DB schema version. Refuse operation with clear error if incompatible. Version alignment with Beads. Ref: TSD 16 Deployment","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:08:22.742046-06:00","updated_at":"2025-12-01T01:08:22.742046-06:00"}
{"id":"bdclaim-yp1","title":"Define ClaimErrorCode enumeration","description":"Create ClaimErrorCode enum: DB_NOT_FOUND, SCHEMA_INCOMPATIBLE, SQLITE_BUSY, WORKSPACE_NOT_FOUND, INVALID_ARGUMENT, UNEXPECTED. Ref: TSD 08 Domain Events","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:52.479963-06:00","updated_at":"2025-12-01T01:04:52.479963-06:00"}
{"id":"bdclaim-z3h","title":"Set up GitHub Releases distribution","description":"Primary distribution via GitHub Releases. Publish raw binary artifacts (.tar.gz / .zip). Ref: TSD 16 Deployment","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T01:08:19.915972-06:00","updated_at":"2025-12-01T01:08:19.915972-06:00"}
{"id":"bdclaim-zbt","title":"Implement SQLiteIssueRepositoryAdapter","description":"Infrastructure adapter implementing IssueRepositoryPort. Read/write SQL against Beads DB. Participate in SQLiteUnitOfWork transactions. Ref: TSD 06 Component Diagram","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:03:59.728124-06:00","updated_at":"2025-12-01T01:03:59.728124-06:00"}
{"id":"bdclaim-zts","title":"Implement LabelSet value object","description":"Create LabelSet collection value object with methods: contains(label), matchesAny(labels). Ref: TSD 07 Domain Model","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-01T01:04:31.704957-06:00","updated_at":"2025-12-01T01:04:31.704957-06:00"}
